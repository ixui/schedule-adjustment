<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.echigoya.springboot.mapper.EventMapper">
  <!-- <insert id="insertEvent" parameterType="Event" useGeneratedKeys="true" keyProperty="event_id">
    insert
    into event(event_name,host_num,category_id,place,host_comment)
    values(#{event_name},#{host_num},#{category_id},#{place},#{host_comment})
  </insert>

  <delete id="deleteEvent" parameterType="Event" >
    delete *
    from event
    	inner join candidate_day
    		on event.event_id = candidate_day.event_id
    wnere event_id = #{parameter.event_id}
  </delete>

  <update id="updateEvent" parameterType="Event" >
    update event
    set
    	event_name = #{event_name}
    	and
    		category_id = #{category_id}
    	and
    		place = #{place}
    	and
    		host_comment = #{host_comment}
    wnere event_id = #{parameter.event_id}
  </update>
 -->
  <select id="selectEventListToId" resultType="hashMap">
    select employee_master.emp_name,employee_master.emp_num,
   			 event.event_name,category_master.category_name,event.place,
   			 event.host_comment,category_master.category_id,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    		inner join category_master
    			on event.category_id = category_master.category_id
    	where event_id = #{id}
  </select>

  <select id="selectEventListNotDevision" resultType="hashMap">
    select event.event_id,event.event_name,employee_master.emp_name
	from event
	inner join employee_master
	on event.host_num = employee_master.emp_num
	where  event.decision_day is  null
	order by event.event_id desc
  </select>


  <select id="selectEventListDevision" resultType="hashMap">
	select event.event_id,event.event_name,employee_master.emp_name,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    	where  event.decision_day is not null
		and <![CDATA[ event.decision_day >= CURRENT_DATE()]]>
    	order by event.decision_day desc
  </select>

   <select id="selectEventListEnd" resultType="hashMap">
    	select event.event_id,event.event_name,employee_master.emp_name,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    	where  event.decision_day is not null
		and <![CDATA[ event.decision_day < CURRENT_DATE()]]>
    	order by event.decision_day
  </select>
</mapper>