<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.ixui.scheduleadjustment.mapper.EventMapper">
  <select id="selectEventListToId" resultType="Event">
    select employee_master.emp_name,employee_master.emp_num,
   			 event.event_name,category_master.category_name,event.place,
   			 event.host_comment,category_master.category_id,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    		inner join category_master
    			on event.category_id = category_master.category_id
    	where event_id = #{id}
  </select>

  <select id="selectEventListNotDevision" resultType="Event">
    select event.event_id,event.event_name,employee_master.emp_name
	from event
	inner join employee_master
	on event.host_num = employee_master.emp_num
	where  event.decision_day is  null
	<if test="hostNum != null">
    	AND host_num = #{hostNum}
  	</if>
  	<if test="categoryNum != null">
    	AND category_id = #{categoryNum}
  	</if>
	order by event.event_id desc
  </select>


  <select id="selectEventListDevision" resultType="Event">
	select event.event_id,event.event_name,employee_master.emp_name,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    	where  event.decision_day is not null
		and <![CDATA[ event.decision_day >= CURRENT_DATE()]]>
    	order by event.decision_day desc
  </select>

   <select id="selectEventListEnd" resultType="Event">
    	select event.event_id,event.event_name,employee_master.emp_name,event.decision_day
    	from event
    		inner join employee_master
    			on event.host_num = employee_master.emp_num
    	where  event.decision_day is not null
		and <![CDATA[ event.decision_day < CURRENT_DATE()]]>
    	order by event.decision_day
  </select>
</mapper>
